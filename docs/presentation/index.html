<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Grow Recipe Data Standard</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <style>
      .no-max-height {
        max-height: none !important;
      }

      .cited-link {
        font-size: 16px !important;
        float: right;
      }

      .text-samples {
        white-space: pre-wrap;       /* Since CSS 2.1 */
        white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
        white-space: -pre-wrap;      /* Opera 4-6 */
        white-space: -o-pre-wrap;    /* Opera 7 */
        word-wrap: break-word;       /* Internet Explorer 5.5+ */
      }

      .reveal section img {
        background: none;
        border-style: none;
        box-shadow: none;
      }

      .block {
        display: inline-block;
      }
    </style>


    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <section>
            <h1>Grow Recipe Data Standard</h1>

            <p>
              By: [Jason Biegel](http://jasonbiegel.com)

            <aside class="notes">
              My name is Jason Biegel, I am a software engineer and CEA enthusiast. I have been working with others in the CEA industry to design an open source grow recipe data standard. What is a grow recipe you might ask?<br>
            </aside>
          </section>

          <section>
            <div>
              <div class="block">
                <a href="https://cool-farm.com/">
                  <img src="img/coolfarm.png" />
                </a>
              </div>
              <div class="block">
                <a href="https://www.hortilux.com/">
                  <img src="img/hortilux.png" />
                </a>
              </div>
            </div>
            <div>
              <div class="block">
                <a href="https://www.osram.us/cb/home/index.jsp">
                  <img src="img/osram.png" />
                </a>
              </div>
              <div class="block">
                <a href="https://swissponic.ch/">
                  <img src="img/swissponic.png" />
                </a> 
              </div>
            </div>
            <div>
              <div class="block">
                <a href="http://www.motorleaf.com/">
                  <img src="img/motorleaf.png" />
                </a>
              </div>
              <div class="block">
                <a href="https://farm.one/">
                  <img src="img/farmone.png" />
                </a> 
              </div>
            </div>
            <div>
              <a href="https://www.agrowbox.org/">
                Agrowbox
              </a>
            </div>

            <aside class="notes">
              *Jason
            </aside>

          </section>
        </section>

        <section>
          <section>

            <h3>What are plant recipes?</h3>

            <p>Instructions on how to grow plants</p>

            <aside class="notes">
              * Alan<br>
              Growers of any level, from hobbyists to farmers, utilize grow recipes to know what environmental conditions are needed to get the best yield possible. Howerver, as more technology is incorporated into the growing process to monitor and control environment conditions, there needs to be a way for a control system to know what the desired conditions are.<br>

              The plant recipe group of the AVF began by figuring out what information about plant growth is important and measurable using tools available to growers.
            </aside>
          </section>

          <section>
            <h2>What information do recipes contain?</h2>

            <aside class="notes">
              This led us to inquire into the fundamental question of, 'What information do recipes contain'? What we found was, 
              even more questions. 'How is the information represented', or "in what range or units are being used?". Altogether though, the underlying commonality was that these environmental conditions could be measured, controlled, or adjusted: either by growers themselves or automated control systems. We split these conditions into three categories: air, water, and light.<br>
            </aside>
          </section>

          <section>
            <h2>Air Metrics</h2>

            <p>Temperature</p>
            <p>Relative Humidity</p>
            <p>Carbon Dioxide</p>
            
            <aside class="notes">
              Air metrics measure conditions in the air around the plants, whether it's for temperature, relative humidity or carbon dioxide.<br>
            </aside>
          </section>

          <section>
            <h2>Water Metrics</h2>

            <p>Temperature</p>
            <p>Electro Conductivity</p>
            <p>Minerals and Soluble Nutrients</p>
            <p>pH</p>

            <aside class="notes">
              Water metrics play a big role hydroponic growing. Most importantly, pH and the soluble element concentration which is typically measured as electro conductivity. To be more accurate, you could also measure the mass concentration of specific elements. Nitrogen, phosphorus, and potassium being the most important elements for plant growth, but there many others to consider as well.<br>
            </aside>
          </section>

          <section>
            <h2>Light Metrics</h2>
            <p>Intensity</p>
            <p>Wavelength</p>
            <p>Correlated Color Temperature</p>
            
            <img src="img/light-charts.png" />

            <aside class="notes">
              Light emits photons onto plants which causes photosynthesis. Photons have wavelengths which are measured in nanometers. Some wavelengths are more desirable than other such and red and blue. Additionally, white light can vary in how warm or cool the light appears. The color temperature of the white light can also dramatically affect plant growth. There is also an intensity for each wavelength that can be measured, in terms of the lumens produced or irradiance received. 
            </aside>
          </section>

          <section>
            <h2>Growth Stages</h2>
            <p>Germination</p>
            <p>Seedling</p>
            <p>Vegetative</p>
            <p>Flowering</p>
            <img style="max-width: 300px;" src="img/growth-stages.png" />

            <aside class="notes">
              Because ideal conditions can change during a plant growing process, we made the structure of the data format contain different stages so conditions can adapt depending on the age of the plant. Conditions can also vary depending on the time of day, for example only providing light to plants for some parts of the day.<br>
            </aside>
          </section>

        </section>


        <section>

          <section>
            <h2>The Recipe Structure</h2>
            <p>What is the recipe structure all about?</p>
            <p>Now that we've discussed the different metric types, and potential growth stages, we can organize this into recipe.</p>
            <p>But first we need a baseline..</p>
            <aside class="notes">
              *Alan Putting this all together, we can now start to formulate the actual structure of the recipe, and the kind of information that it contains.

            </aside>
          </section>

          <section>
            <h2>Creating the Default Stage</h2>
            <p>Each recipe includes a default stage for defining default metrics.</p>
            <p>Metrics can be defined by a tolerable range or precise value.</p>
            <pre>
              <code class="xml" data-trim>
                &lt;recipe&gt;
                  &lt;default&gt;
                    &lt;air&gt;
                      &lt;temperature min=&quot;18&quot; max=&quot;24&quot; /&gt;
                    &lt;/air&gt;
                    &lt;water&gt;
                      &lt;ph min=&quot;6.8&quot; max=&quot;6.8&quot; /&gt;
                    &lt;/water&gt;
                  &lt;/default&gt;
                &lt;/recipe&gt;
              </code>
            </pre>

            <aside class="notes">The recipe begins by defining defaults metrics, grouped together as the 'Default Stage'. This will encapsulate the baseline settings for each of our nutrients and metrics. When we give a metric, we can define a tolerable range, for what's acceptable for one of our nutrients, or we can specify a precise value.</aside>
          
          </section>

          <section>
            <h2>Adding Additional Stages</h2>
            <p>Each additional stage builds upon the Default stage. We only include the metrics that are different.</p>
            <pre>
              <code class="xml no-max-height" data-trim>
                &lt;recipe&gt;
                  &lt;default&gt;
                    &lt;air&gt;
                      &lt;temperature min=&quot;18&quot; max=&quot;24&quot; /&gt;
                    &lt;/air&gt;
                    &lt;water&gt;
                      &lt;ph min=&quot;6.8&quot; max=&quot;6.8&quot; /&gt;
                    &lt;/water&gt;
                  &lt;/default&gt;
                  &lt;vegetative&gt;
                    &lt;air&gt;
                      &lt;temperature min=&quot;12&quot; max=&quot;15&quot; /&gt;
                    &lt;/air&gt;
                  &lt;/vegetative&gt;
                &lt;/recipe&gt;
              </code>
            </pre>

            <aside class="notes">If we want to build upon the default stage, we can start including additional ones, like a 'vegetative stage' that you see here. Each additional stage we add builds upon the default stage. And by this, We only include the changes we want for the new stage.</aside>
          </section>

          <section>
            <h2>Timing and Duration</h2>
            <p>We can also specify time intervals for how long a Stage should last.</p>
            <p>Or a stage can be defined further into day or night phases, for example.</p>
            <pre>
              <code class="xml no-max-height" data-trim>
                &lt;recipe&gt;
                  &lt;default&gt;
                    &lt;air&gt;
                      &lt;temperature min=&quot;18&quot; max=&quot;24&quot; /&gt;
                    &lt;/air&gt;
                    &lt;water&gt;
                      &lt;ph min=&quot;6.8&quot; max=&quot;6.8&quot; /&gt;
                    &lt;/water&gt;
                  &lt;/default&gt;
                  &lt;!-- 7 days --&gt;
                  &lt;vegetative duration="604800"&gt;
                    &lt;air&gt;
                      &lt;temperature min=&quot;12&quot; max=&quot;15&quot; /&gt;
                    &lt;/air&gt;
                  &lt;/vegetative&gt;
                &lt;/recipe&gt;
              </code>
            </pre>

            <aside class="notes">
              Additionlly, we can set durations and active-times for our non-default stages. For each of the non-default stages we can include Start and End times, based on a 24 hour cycle.<br>
              Or.. even add day duration for how long the stage should be defined.
            </aside>
          </section>

          <section>
            <h2>How to write a recipe</h2>
            <pre class="text-samples" data-trim>Temperatures should be in the range of 65 F. (18 C.) or more indoors</pre>
            <pre class="text-samples">Flowering will be promoted by warmer temperatures and best growth is from 75 to 85 F. (24-29 C.)</pre>
            <pre>
              <code class="xml" contenteditable data-trim>
                &lt;recipe&gt;

                &lt;/recipe&gt; 
              </code>
            </pre>
            <p class="cited-link">
              <i>Text cited from <a href="https://bonnieplants.com/growing/growing-tomatoes/">bonnieplants.com</a></i>
            </p>

            <aside class="notes">
              * Jason <br>
              Now we're going to go through an exercise of writing a recipe in XML.<br>
              Ideally, recipes would be created and maintained through a UI.<br>
              However, writing recipes manually in XML is not too painful.<br>
              I found some instructions on growing tomatoes online.<br>
              The link to the webpage I got the instructions from is at the bottom of this slide
              incase anyone is interested in growing tomatoes themselves<br>
              **go through text**<br>
              Now lets add some more metrics about water that will be absorbed by the tomato roots<br>
              We can specify the pH range that we want the water to be (5.8 to 6.3)<br>
              We can also specify the electro-conductivity range (2 to 3.5)<br>
            </aside>
          </section>

        </section>
        
        <section>
          <section>
            <h2>Benefits of XML</h2>
            <p>
              One of the most popular open standards for text data
            </p>
            <p>
              Supported by many programming langauges
            </p>
            <p>
              Has rich schema support (XSL, RELAX NG)
            </p>

            <aside class="notes">
              * Jason<br>
              You may be asking yourself now, why are they writing in XML?<br>
              **hit next twice<br>
              It would also not be difficult to write conversion tools from other text formats such as JSON or YAML
             <aside>
          </section>
          <section>
            <h2>Formatting and Schema</h2>

            <pre>
              <code class="xml" data-trim>
                &lt;notagreatrecipe&gt;
                  &lt;default&gt;
                    &lt;air&gt;
                      &lt;butterflies min=&quot;more than five&quot; max=&quot;many&quot; /&gt;
                    &lt;/lava&gt;
                    &lt;moons&gt;
                      &lt;bananas min=&quot;6.8&quot; max=&quot;sandwiches&quot; /&gt;
                    &lt;/moons&gt;
                  &lt;/def&gt;
                &lt;/notagreatrecipe&gt;
              </code>
            </pre>

            <aside class="notes">
              A schema is a lexicon that's used to validate a recipe. It determines what is or isn't a metric, and the 'grammar' for how recipes are structured. It can determine an invalid recipe..
            </aside>

          </section>

          <section>
            <h2>Formatting and Schema continued</h2>
            <p>..from a valid one</p>
            <pre>
              <code class="xml" data-trim>
                &lt;recipe&gt;
                  &lt;default&gt;
                    &lt;air&gt;
                      &lt;temperature min=&quot;18&quot; max=&quot;24&quot; /&gt;
                    &lt;/air&gt;
                    &lt;water&gt;
                      &lt;pH min=&quot;6.8&quot; max=&quot;7.25&quot; /&gt;
                    &lt;/air&gt;
                  &lt;/default&gt;
                &lt;/recipe&gt;
              </code>
            </pre>
          </section>

        </section>
        <section>

          <section>
            <h2>What are the solutions out there now?</h2>

            <aside class="notes">
              * Jason
            </aside>
          </section>

          <section>
            <h2>Free form text</h2>
            <img src="img/text-recipe.png" />

            <aside class="notes">
              We also looked at what was already out there. We found a lot of recipes are simply written word which is easy for humans to read, but difficult for a computer to understand.<br>
            </aside>
          </section>

          <section>
            <img src="img/buzz.png" />

            <aside class="notes">
              There are many great products on the market for monitoring controling growing areas. However, each one of these products have propietary formats for storing grow recipes. Growers might also come up with their own format to store grow recipe data such as Excel. This limits the capabilities of what can be done with grow recipes.<br>
            </aside>
          </section>

          <section>
            <h2>What else is out there?</h2>

            <p>
              <a href="https://www.media.mit.edu/groups/open-agriculture-openag/overview/">
                MIT's Open Ag Initiative
              </a>
            </p>

            <p>
              <a href="http://openag.io/">
                Open Ag Data Alliance
              </a>
            </p>

            <p>
              <a href="https://github.com/open-ag-tech/api-spec">
                Open Ag Tech
              </a>
            </p>

            <aside class="notes">
              There are several other open source ag initiatives out there that we hope to combine efforts with
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h3>Treat grow recipes like source code</h3>
            <p>Content should be propietarty,<br>not the content's format.</p>

            <aside class="notes">
              If grow recipes are stored in a structured format that is friendly for software development, it becomes much more versatile.<br>
              In the software industry, the valuable information is the source code, not the programming language of the source code. Similarly, the valuable information in grow recipes is the evironmental conditions, not the format of the data.
            </aside>

          </section>

          <section>
            <img src="img/git.png" />

            <aside class="notes">
              Experimenting with different environmental conditions is a big part of growing to find the best yield. Using a text format to store grow recipe data will let growers leverage version control to manage recipe experimentation. If you familiar with git, this could be done in the form of branches. 
            </aside>
          </section>

          <section>
            <pre>
              <code class="bash" data-trim>
                $ git checkout -b higher-temp-test

                $ vim recipe.xml

                $ git add recipe.xml

                $ git commit -m "increase air temperature"

                $ git checkout master

                $ git merge higher-temp-test
              </code>
            </pre>

          </section>

        </section>

        <section>
          <h2>Whats next?</h2>

          <p>
            Adaptation
          </p>

          Try [Gardnr](https://gardnr.readthedocs.io)!

          <aside class="notes">
            * Jason<br>
            The challenge of this is do we start having farming use this format, or do we have software manufacturers incorporate this format. I have written a an open source IoT monitor and control solution which incorporates the grow recipe schema.
          </aside>
        </section>

        <section>
          <h2>How to get involved</h2>

          <p>Fill out a <a href="https://docs.google.com/forms/d/e/1FAIpQLSe6h1lA1nBl3xyMpp6_RMoFksJ_gKzOrvybXDyGu1hWxPirZw/viewform">survey</a></p>

          <p>Fork the repository</p>

          <p><a href="https://github.com/njason/grow-recipe-schema">https://github.com/njason/grow-recipe-schema</a>

          <p>Try it out yourself!</p>

          <aside class="notes">
            Because this is an open source initiative, anyone who is interested can get involved in developing the grow recipe standard. Currently, we are keeping our technical progress in a GitHub repository.
          </aside>
        </section>

        <section>
          <h2>Thank you!</h2>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
        history: true,
        dependencies: [
          { src: 'plugin/markdown/marked.js' },
          { src: 'plugin/markdown/markdown.js' },
          { src: 'plugin/notes/notes.js', async: true },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
      });
    </script>
  </body>
</html>
